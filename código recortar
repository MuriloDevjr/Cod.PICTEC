import cv2
import os

if not os.path.exists("files"):
    os.makedirs("files")

imagem = cv2.imread("imagem_original.jpg")


    print("Erro: imagem não encontrada! Verifique se o nome está correto.")
    exit()


r = cv2.selectROI("Selecione o retângulo com o mouse", imagem)
x, y, w, h = r
cv2.destroyAllWindows()

recorte = imagem[int(y):int(y+h), int(x):int(x+w)]


ph = input("Digite o valor do PH (ex: 7): ")


arquivos = os.listdir("files")
indice = len([arq for arq in arquivos if arq.endswith(".jpg")]) + 1


nome_imagem = f"files/retang{indice}.jpg"
nome_txt = f"files/retang{indice}.txt"


cv2.imwrite(nome_imagem, recorte)
with open(nome_txt, "w") as f:
    f.write(f"PH:{ph}")

print(f"Imagem salva como {nome_imagem}")
print(f"Arquivo de anotação salvo como {nome_txt}")

arquivos = os.listdir("files")
indice = len([arq for arq in arquivos if arq.endswith(".jpg")]) + 1

nome_imagem = f"files/retang{indice}.jpg"
nome_txt = f"files/retang{indice}.txt"
  
cv2.imwrite(nome_imagem, recorte)
with open(nome_txt, "w") as f:
    f.write(f"PH:{ph}")

print(f"Imagem salva como {nome_imagem}")
print(f"Arquivo de anotação salvo como {nome_txt}")


